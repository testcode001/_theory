æ•°æ®æº.player--surface--surfaceTexture--(Glsurfaceviewæ—‹è½¬90åº¦?.opengles.egl: Display.Surface.Context)--textureViewï¼šæ¯ä¸€å±‚éƒ½æœ‰å›è°ƒå‡½æ•°è®¾ç½®,å›è°ƒä¼ é€’ä¸Šå±‚è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å˜é‡å’Œæ•°æ®ã€‚
(è§†é¢‘æ•°æ®æºå¯è·å–sps,pps.GOP.å®½.é«˜.å¸§ç‡, I.B.På¸§ IDRå¸§å³å¼ºåˆ¶åˆ·æ–°å¸§ï¼Œå¼ºåˆ¶åˆ·æ–°å®½)
RAWrgb--yuv420.yuv420sp(x264ç¼–ç -->h264.h265è£¸æµè§£ç -->yuv420p.yuv420sp--)--rgba--jpg.png
YUV Planar(p)ï¼šY\U\Væ•°æ®æ˜¯åˆ†å¼€å­˜æ”¾çš„ï¼Œåœ¨ä¸‰ä¸ªä¸åŒçš„å¹³é¢ï¼ˆæ•°ç»„ï¼‰
YUV Semi-Planar(sp)ï¼šYæ˜¯å•ç‹¬ä¸€ä¸ªå¹³é¢ï¼ˆæ•°ç»„ï¼‰ï¼Œè€ŒUã€Væ˜¯äº¤å‰å­˜æ”¾çš„ï¼Œåœ¨å¦ä¸€ä¸ªå¹³é¢ï¼ˆæ•°ç»„ï¼‰
I420: YYYYYYYY UU VV      =>YUV420P
YV12: YYYYYYYY VV UU     =>YUV420P
NV12: YYYYYYYY UVUV     =>YUV420SP
NV21: YYYYYYYY VUVU     =>YUV420SP
https://www.polarxiong.com/archives/Android-MediaCodec%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E7%A1%AC%E4%BB%B6%E8%A7%A3%E7%A0%81-%E9%AB%98%E6%95%88%E7%8E%87%E5%BE%97%E5%88%B0YUV%E6%A0%BC%E5%BC%8F%E5%B8%A7-%E5%BF%AB%E9%80%9F%E4%BF%9D%E5%AD%98JPEG%E5%9B%BE%E7%89%87-%E4%B8%8D%E4%BD%BF%E7%94%A8OpenGL.html
libyuvæ˜¯Googleå¼€æºçš„yuvå›¾åƒå¤„ç†åº“ï¼Œå®ç°å¯¹å„ç§yuvæ•°æ®(byte[]æ•°ç»„)ä¹‹é—´çš„è½¬æ¢ï¼ŒåŒ…æ‹¬æ•°æ®è½¬æ¢ï¼Œè£å‰ªï¼Œç¼©æ”¾ï¼Œæ—‹è½¬ã€‚

gop(group of pictureå›¾åƒåºåˆ—)
GOPç»“æ„ä¸€èˆ¬ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚M=3ï¼ŒN=12ã€‚Må€¼è¡¨ç¤ºIå¸§æˆ–è€…På¸§ä¹‹é—´çš„å¸§æ•°ç›®ï¼ŒNå€¼è¡¨ç¤ºä¸€ä¸ªGOPçš„å¸§æ•°ã€‚ä¸Šé¢çš„M=3ï¼ŒN=12ï¼ŒGOPç»“æ„ä¸ºï¼šIBBPBBPBBPBBIã€‚
ä¸€ä¸ªgopåŒ…çš„ç¬¬ä¸€å¸§ä¸€å®šæ˜¯IDRå¸§ã€‚ä¸€ä¸ªGOPæ—¶é•¿çš„è®¡ç®—å…¬å¼ï¼šduration=N/FPSã€‚å…¶ä¸­ï¼ŒNè¡¨ç¤ºGOPå¸§æ•°ï¼ŒFPSè¡¨ç¤ºå¸§ç‡ã€‚æ¯”å¦‚ï¼ŒN=72ï¼ŒFPS=24ï¼Œé‚£ä¹ˆGOPæ—¶é•¿d=N/FPS=3sã€‚
å…³äºGOPæˆ‘çœ‹åˆ°2ç§è¯´æ³•ï¼Œä¸€ç§è¯´æ³•å¦‚ä¸Šï¼Œ1ä¸ªGOPé‡Œé¢åªæœ‰ä¸€ä¸ªIå¸§ï¼Œç¬¬äºŒç§è¯´æ³•æ˜¯1ä¸ªGOPé‡Œé¢å¯ä»¥æœ‰å¥½å‡ ä¸ªIå¸§ï¼Œæ‰€ä»¥æˆ‘å°±ç³Šæ¶‚äº†ã€‚
ç¬¬ä¸€ç§è¯´æ³•æ˜¯é’ˆå¯¹Mpeg2çš„ï¼Œè¿™é‡Œé¢ä¸€ä¸ªGOPåªæœ‰ä¸”åªæœ‰ä¸€ä¸ªåœ¨ç»„å¤´çš„Iå¸§ï¼›ç¬¬äºŒç§è¯´æ³•æ˜¯é’ˆå¯¹h264çš„æ–°ç‰¹ã€‚
ç»“è®ºï¼š
æ¯ä¸ªGOPä¸€å®šæ˜¯ä»¥ä¸€ä¸ªIå¸§å¼€å§‹çš„ï¼Œä½†æ˜¯å´ä¸ä¸€å®šæŒ‡ä»£çš„æ˜¯ä¸¤ä¸ªIå¸§ä¹‹é—´çš„è·ç¦»ã€‚å› ä¸ºä¸€ä¸ªGOPå†…å¯èƒ½åŒ…å«å‡ ä¸ªIå¸§ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªIå¸§ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€å¸§ï¼‰æ‰æ˜¯å…³é”®å¸§ã€‚
https://blog.csdn.net/qq_32245927/article/details/80029949
ä¸€ä¸ªgopåŒ…ä¸­æœ‰spsï¼Œppsã€‚spsä¸­åŒ…å«äº†æ­¤åºåˆ—å›¾ç‰‡çš„å®½.é«˜.å¸§ç‡ç­‰ä¿¡æ¯ã€‚ä¸€ä¸ªåºåˆ—GOPçš„ç¬¬ä¸€ä¸ªå›¾åƒå¸§å«åš IDRå¸§å³å¼ºåˆ¶åˆ·æ–°å¸§ï¼Œå¼ºåˆ¶åˆ·æ–°å®½.é«˜.é¢‘ç‡ç­‰ä¿¡æ¯(å±äºç‰¹æ®Šçš„ï¼©å¸§)ã€‚

IDR  = instantaneous decoding refresh å³æ—¶è§£ç åˆ·æ–°ã€‚
ç›®çš„ï¼šã€ä¸ºäº†è§£ç çš„é‡åŒæ­¥ã€‘
å½“è§£ç å™¨è§£ç åˆ° IDR å›¾åƒæ—¶ã€ç›¸å½“äºå‘è§£ç å™¨å‘é€äº†ä¸€ä¸ªæ¸…ç†reference bufferçš„ä¿¡å·ã€‘ï¼Œç«‹å³å°†å‚è€ƒå¸§é˜Ÿåˆ—æ¸…ç©ºã€é©±åŠ¨å™¨å‚æ•°å—DPB(decord picture buff å‚è€ƒå¸§åˆ—è¡¨)â†’å¯¼è‡´PPSã€SPSå‚æ•°æ›´æ–°ã€‘
ï¼Œå°†å·²è§£ç çš„æ•°æ®å…¨éƒ¨è¾“å‡ºæˆ–æŠ›å¼ƒï¼Œé‡æ–°æŸ¥æ‰¾å‚æ•°é›†ï¼Œå¼€å§‹ä¸€ä¸ªæ–°çš„åºåˆ—ã€‚
å¦‚æœå‰ä¸€ä¸ªåºåˆ—å‡ºç°é‡å¤§é”™è¯¯ï¼Œåœ¨è¿™é‡Œå¯ä»¥è·å¾—é‡æ–°åŒæ­¥çš„æœºä¼šã€‚
//ä¸ºäº†å–å¾—æ›´é«˜çš„å›¾åƒè´¨é‡ï¼Œåœ¨ä¸€ä¸ªè§†é¢‘æ–‡ä»¶ä¸­æœ‰å¥½å¤šä¸ªIDRå¸§
IDR frameï¼šIå’ŒIDRå¸§éƒ½ä½¿ç”¨å¸§å†…é¢„æµ‹ï¼Œåœ¨ç¼–ç è§£ç ä¸­ä¸ºäº†æ–¹ä¾¿ï¼Œé¦–ä¸ªIå¸§è¦å’Œå…¶ä»–Iå¸§åŒºåˆ«å¼€ï¼ŒæŠŠç¬¬ä¸€ä¸ªIå¸§å«IDRï¼Œè¿™æ ·æ–¹ä¾¿æ§åˆ¶ç¼–ç å’Œè§£ç æµç¨‹ï¼Œæ‰€ä»¥IDRå¸§ä¸€å®šæ˜¯Iå¸§ï¼Œä½†Iå¸§ä¸ä¸€å®šæ˜¯IDRå¸§ï¼›
IDRå¸§çš„ä½œç”¨æ˜¯ç«‹åˆ»åˆ·æ–°,ä½¿é”™è¯¯ä¸è‡´ä¼ æ’­,ä»IDRå¸§å¼€å§‹ç®—æ–°çš„åºåˆ—å¼€å§‹ç¼–ç ã€‚Iå¸§æœ‰è¢«è·¨å¸§å‚è€ƒçš„å¯èƒ½,IDRä¸ä¼šã€‚

iå¸§ i frame, intra picture éå‚è€ƒå¸§/ç‹¬ç«‹å¸§  å¸§å†…ç¼–ç å¸§ğŸ‘ˆå¸§å†…å‹ç¼©
	é€šå¸¸æ˜¯GOPçš„ç¬¬ä¸€ä¸ªå¸§(å³IDR)ï¼Œä¹Ÿå¯èƒ½åœ¨ä¸€ä¸ªåºåˆ—ä¸­é—´æ’å…¥Iå¸§
	ä¸€èˆ¬æ¯ç§’è‡³å°‘ä¸€ä¸ªIå¸§
	Iå¸§ä¸¢å¤±â†’éšåçš„På¸§ä¹Ÿå°±æ— æ³•è§£æ	
ä½¿ç”¨ ffmpeg è·å– I å¸§ï¼š
æŒ‡ä»¤ä¸ºï¼šffmpeg -i wkll.mp4 -ss 00:00:00 -t 1 -r 1 -q:v 2 -f image2 pic-%03d.jpeg

PTS(Presentation Time Stamp)å’ŒDTS(Decode Time Stamp): PTSå°±è¯´è¿™ä¸ªå¸§ä»€ä¹ˆæ—¶å€™ä¼šæ”¾åœ¨æ˜¾ç¤ºå™¨ä¸Š;DTSå°±æ˜¯è¯´è¿™ä¸ªå¸§ä»€ä¹ˆæ—¶å€™è¢«æ”¾åœ¨ç¼–ç å™¨å»è§£ã€‚
é‚£ä¹ˆå¦‚æœå…¨æ˜¯Iå¸§å’ŒPå¸§ï¼ŒPTSå’ŒDTSéƒ½æ˜¯å•è°ƒé€’å¢çš„ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æœ‰Bå¸§ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µ?å› ä¸ºå¤§å®¶éƒ½çŸ¥é“ï¼Œå¯¹äºBå¸§æ¥è®²ï¼Œå®ƒä¼šå¼•ç”¨å‰é¢çš„å¸§å’Œåé¢çš„å¸§ã€‚
æˆ‘ä»¬çœ‹è¿™ä¸ªä¾‹å­ï¼Œå°±æ˜¯å½“Bå¸§è¿›æ¥çš„æ—¶å€™ï¼Œå› ä¸ºå®ƒè¦å¼•ç”¨åé¢çš„På¸§ï¼Œä¹Ÿè¦å¼•ç”¨å‰é¢çš„Iå¸§ï¼Œå¯ä»¥çœ‹åˆ°DTSçš„é¡ºåºï¼Œä¸€ä¸‰å››äºŒï¼Œç„¶åPTSé¡ºåºï¼Œä¸€äºŒä¸‰å››ã€‚
Bå¸§å®ƒä¼šæ ¹æ®å®ƒç¼–ç æ—¶å€™çš„ç‰¹æ€§ï¼Œå®ƒä¼šè‡ªåŠ¨çš„æŠŠå®ƒçš„DTSæ—¶é—´æˆ³å¾€åæŒªï¼ŒæŠŠå®ƒå¼•ç”¨çš„å¸§å…ˆæ”¾åˆ°å‰é¢å»ï¼Œç­‰å®ƒå¼•ç”¨çš„å¸§è§£å®Œäº†ï¼Œæ•°æ®è§£å®Œäº†ä¹‹åï¼Œæ‰ä¼šæŠŠBå¸§å»è§£ï¼Œ
å¦åˆ™çš„è¯ï¼Œæˆ‘å…ˆæŠŠBå¸§æ”¾è¿›å»ï¼Œå®ƒå¼•ç”¨åé¢çš„På¸§ï¼ŒPå¸§çš„æ•°æ®è¿˜æ²¡æœ‰ï¼ŒBå¸§è§£ä¸å‡ºæ¥ã€‚
æ‰€ä»¥è¯´è¿™ç‚¹ä¸Šç»™å¤§å®¶è®²ä¸€ä¸‹ï¼ŒBå¸§ï¼ŒPå¸§ï¼ŒIå¸§å®ƒä»¬æ•´ä¸ªæ”¾åœ¨ä¸€ä¸ªè§†é¢‘æµé‡Œé¢ï¼Œå®ƒçš„è§£ç é¡ºåºå’Œç¼–ç é¡ºåºï¼Œå½“ç„¶åç»­çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ ¹æ®è¿™ä¸ªæœ‰ä¸€äº›å¼€æ”¾æ€§çš„æ€è€ƒã€‚

H264æµ gopåŒ…Header(NALU Unit)ï¼šsps(Sequence Paramater Set) pps(Picture Paramater Set) è§†é¢‘å®½.é«˜ã€‚ ç ç‡.å¸§ç‡.åˆ†è¾¨ç‡  Iå…³é”®å¸§.B.På¸§ IDRå¸§å³å¼ºåˆ¶åˆ·æ–°å¸§ï¼Œå¼ºåˆ¶åˆ·æ–°å®½
https://jingyan.baidu.com/article/3c48dd34c06ac0e10ae35841.html
https://blog.csdn.net/DaveBobo/article/details/75041348
H.264åŸå§‹ç æµï¼ˆåˆç§°ä¸ºâ€œè£¸æµâ€ï¼‰æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªçš„NALUç»„æˆçš„ã€‚
å…¶ä¸­æ¯ä¸ªNALUä¹‹é—´é€šè¿‡startcodeï¼ˆèµ·å§‹ç ï¼‰è¿›è¡Œåˆ†éš”ï¼Œèµ·å§‹ç åˆ†æˆä¸¤ç§ï¼š0x000001ï¼ˆ3Byteï¼‰æˆ–è€…0x00000001ï¼ˆ4Byteï¼‰ã€‚å¦‚æœNALUå¯¹åº”çš„Sliceä¸ºä¸€å¸§çš„å¼€å§‹å°±ç”¨0x00000001ï¼Œå¦åˆ™å°±ç”¨0x000001ã€‚
H.264ç æµè§£æçš„æ­¥éª¤å°±æ˜¯é¦–å…ˆä»ç æµä¸­æœç´¢0x000001å’Œ0x00000001ï¼Œåˆ†ç¦»å‡ºNALUï¼›ç„¶åå†åˆ†æNALUçš„å„ä¸ªå­—æ®µã€‚æœ¬æ–‡çš„ç¨‹åºå³å®ç°äº†ä¸Šè¿°çš„ä¸¤ä¸ªæ­¥éª¤ã€‚
https://blog.csdn.net/leixiaohua1020/article/details/50534369

camera YUV æ•°æ®æ ¼å¼çŸ¥è¯†ï¼š
https://blog.csdn.net/whyqcwy/article/details/101546043

ffmpegè§£ç H264
androidä¸‹ä½¿ç”¨ffmpegè§£ç å‡½æ•°æ’­æ”¾H264è£¸æµ
https://blog.csdn.net/starhosea/article/details/73128120
ffmpegè§£ç H264ï¼Œå¹¶è½¬æ¢æˆRGBæ˜¾ç¤ºåˆ°surfaceä¸Š

é›·ç¥ csdn ffmpeg
https://www.jianshu.com/p/558855026e95
https://blog.csdn.net/leixiaohua1020/article/details/15811977
http://blog.csdn.net/leixiaohua1020
https://www.zhihu.com/people/leixiaohua1020
http://jhdr.xhby.net/content/201608/03/c213550.html

MediaCodecï¼š
https://blog.csdn.net/u012521570/article/details/78783294

android å¦‚ä½•ä¿å­˜openglç¾é¢œè¿‡çš„è§†é¢‘
https://blog.csdn.net/u010029439/article/details/89494475

h265.HEVCï¼š
https://blog.csdn.net/NB_vol_1/article/details/51143186

æ•°æ®æºã€surfaceã€surfaceTexture(onFrameAvailable(...))ã€GlSurfaceView(onDrawFrame(GL10 gl))ã€TextureViewå„å±‚çš„å›è°ƒ
æ•°æ®æº-->Surface-->SurfaceTexture-->GlSurfaceView(textureID)ã€TextureView
1.LocalVideo(ijkPlayer.setDataSource())
2.UsbDeviceå¤–è®¾(MediaCodec)ï¼š
3.Camera



